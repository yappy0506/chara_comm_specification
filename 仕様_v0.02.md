# 仕様書

## コンセプト
LLMにキャラクターを演じさせ、playerと対話いてもらう会話型アプリケーション

## 使用ツール
 * python
 * langchain
 * lmstudio(openai/gpt-oss-20b)

## 仕様
 * キャラクターの設定参照システム
    * キャラクター設定は外部ファイルを参照の上、システムプロンプトに反映させる
    * 「口調」「一人称」「禁止事項（メタ発言禁止等）」も外部ファイルを参照の上、システムプロンプトに反映させる
    * 会話は100ターン(暫定)保持する。
    * 会話はローカルに保存する(参照スピードがメモリの方が速いなら、メモリにも保存したい)
    * 意図的に会話履歴をresetしない限り、会話の記憶は永続化する。
 * インタフェース
    * CUI
    * 入力に対し、1回返答を行う。
    * 入力は1行(将来、GUI変更時に複数行対応)
    * 出力はキャラクターが発話言葉のみ
    * 会話のreset、Appの終了といった基本的コマンドを備える
 * lmstudio仕様
    * OpenAI互換APIで叩く前提
    * lmstudioが立ち上がっていない、サーバーが有効化されていない場合は有効化する
 * 実装の思想
    * 今後の拡張性を考慮し、コードファイルは機能単位で分割し、機能間での依存性が高すぎないようにする。

## 今後考えている拡張
 * 感情をパラメータとして持ち、会話しながら態度を変化させる。
 * Playerの入力を待たずに、無言という状況や入力中という状況も考慮して会話する。
 * GUIにする。
 * Unityと統合し、ゲームにする。
 * 長期的な記憶を持つ。
 * 会話の中でも設定がくみ上げられていく。
 * キャラ設定は別ファイルで管理可能
 * 別途、キャラの過去のエピソード(物語)を管理するファイルも作成する。
 * マルチモーダルにし、入力画像に対しも返答するようにする
 * 複数人とも並列に会話できるようにする
 * 画面にキャラクターを映し、それと連動するようにする。